{"version":3,"sources":["skylark-bootstrap-treeview.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../skylark-bootstrap-treeview.js","sourcesContent":["define('skylark-bootstrap-treeview/TreeView',[\n\t\"skylark-langx/skylark\",\n\t\"skylark-langx/langx\",\n\t\"skylark-domx-query\",\n  \t\"skylark-utils-dom/plugins\"\n], function(skylark,langx,$,plugins) {\n\n\t/*global jQuery, console*/\n\n\t'use strict';\n\n\n\tvar pluginName = 'treeview';\n\n\tvar _default = {};\n\n\t_default.settings = {\n\n\t\tinjectStyle: true,\n\n\t\tlevels: 2,\n\n\t\texpandIcon: 'glyphicon glyphicon-plus',\n\t\tcollapseIcon: 'glyphicon glyphicon-minus',\n\t\temptyIcon: 'glyphicon',\n\t\tnodeIcon: '',\n\t\tselectedIcon: '',\n\t\tcheckedIcon: 'glyphicon glyphicon-check',\n\t\tuncheckedIcon: 'glyphicon glyphicon-unchecked',\n\n\t\tcolor: undefined, // '#000000',\n\t\tbackColor: undefined, // '#FFFFFF',\n\t\tborderColor: undefined, // '#dddddd',\n\t\tonhoverColor: '#F5F5F5',\n\t\tselectedColor: '#FFFFFF',\n\t\tselectedBackColor: '#428bca',\n\t\tsearchResultColor: '#D9534F',\n\t\tsearchResultBackColor: undefined, //'#FFFFFF',\n\n\t\tenableLinks: false,\n\t\thighlightSelected: true,\n\t\thighlightSearchResults: true,\n\t\tshowBorder: true,\n\t\tshowIcon: true,\n\t\tshowCheckbox: false,\n\t\tshowTags: false,\n\t\tmultiSelect: false,\n\n\t\t// Event handlers\n\t\tonNodeChecked: undefined,\n\t\tonNodeCollapsed: undefined,\n\t\tonNodeDisabled: undefined,\n\t\tonNodeEnabled: undefined,\n\t\tonNodeExpanded: undefined,\n\t\tonNodeSelected: undefined,\n\t\tonNodeUnchecked: undefined,\n\t\tonNodeUnselected: undefined,\n\t\tonSearchComplete: undefined,\n\t\tonSearchCleared: undefined\n\t};\n\n\t_default.options = {\n\t\tsilent: false,\n\t\tignoreChildren: false\n\t};\n\n\t_default.searchOptions = {\n\t\tignoreCase: true,\n\t\texactMatch: false,\n\t\trevealResults: true\n\t};\n\n\tvar TreeView =  plugins.Plugin.inherit({\n\t\tklassName: \"TreeView\",\n\n\t\tpluginName : \"bs3.TreeView\",\n\n\t\ttemplate : {\n\t\t\tlist: '<ul class=\"list-group\"></ul>',\n\t\t\titem: '<li class=\"list-group-item\"></li>',\n\t\t\tindent: '<span class=\"indent\"></span>',\n\t\t\ticon: '<span class=\"icon\"></span>',\n\t\t\tlink: '<a href=\"#\" style=\"color:inherit;\"></a>',\n\t\t\tbadge: '<span class=\"badge\"></span>'\n\t\t},\n\n\t\tcss : '.treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}' ,\n\n\t\t_construct : function (element, options) {\n\n\t\t\tthis.$element = $(element);\n\t\t\tthis.elementId = element.id;\n\t\t\tthis.styleId = this.elementId + '-style';\n\n\t\t\tthis.init(options);\n\n\t\t\treturn {\n\n\t\t\t\t// Options (public access)\n\t\t\t\toptions: this.options,\n\n\t\t\t\t// Initialize / destroy methods\n\t\t\t\tinit: langx.proxy(this.init, this),\n\t\t\t\tremove: langx.proxy(this.remove, this),\n\n\t\t\t\t// Get methods\n\t\t\t\tgetNode: langx.proxy(this.getNode, this),\n\t\t\t\tgetParent: langx.proxy(this.getParent, this),\n\t\t\t\tgetSiblings: langx.proxy(this.getSiblings, this),\n\t\t\t\tgetSelected: langx.proxy(this.getSelected, this),\n\t\t\t\tgetUnselected: langx.proxy(this.getUnselected, this),\n\t\t\t\tgetExpanded: langx.proxy(this.getExpanded, this),\n\t\t\t\tgetCollapsed: langx.proxy(this.getCollapsed, this),\n\t\t\t\tgetChecked: langx.proxy(this.getChecked, this),\n\t\t\t\tgetUnchecked: langx.proxy(this.getUnchecked, this),\n\t\t\t\tgetDisabled: langx.proxy(this.getDisabled, this),\n\t\t\t\tgetEnabled: langx.proxy(this.getEnabled, this),\n\n\t\t\t\t// Select methods\n\t\t\t\tselectNode: langx.proxy(this.selectNode, this),\n\t\t\t\tunselectNode: langx.proxy(this.unselectNode, this),\n\t\t\t\ttoggleNodeSelected: langx.proxy(this.toggleNodeSelected, this),\n\n\t\t\t\t// Expand / collapse methods\n\t\t\t\tcollapseAll: langx.proxy(this.collapseAll, this),\n\t\t\t\tcollapseNode: langx.proxy(this.collapseNode, this),\n\t\t\t\texpandAll: langx.proxy(this.expandAll, this),\n\t\t\t\texpandNode: langx.proxy(this.expandNode, this),\n\t\t\t\ttoggleNodeExpanded: langx.proxy(this.toggleNodeExpanded, this),\n\t\t\t\trevealNode: langx.proxy(this.revealNode, this),\n\n\t\t\t\t// Expand / collapse methods\n\t\t\t\tcheckAll: langx.proxy(this.checkAll, this),\n\t\t\t\tcheckNode: langx.proxy(this.checkNode, this),\n\t\t\t\tuncheckAll: langx.proxy(this.uncheckAll, this),\n\t\t\t\tuncheckNode: langx.proxy(this.uncheckNode, this),\n\t\t\t\ttoggleNodeChecked: langx.proxy(this.toggleNodeChecked, this),\n\n\t\t\t\t// Disable / enable methods\n\t\t\t\tdisableAll: langx.proxy(this.disableAll, this),\n\t\t\t\tdisableNode: langx.proxy(this.disableNode, this),\n\t\t\t\tenableAll: langx.proxy(this.enableAll, this),\n\t\t\t\tenableNode: langx.proxy(this.enableNode, this),\n\t\t\t\ttoggleNodeDisabled: langx.proxy(this.toggleNodeDisabled, this),\n\n\t\t\t\t// Search methods\n\t\t\t\tsearch: langx.proxy(this.search, this),\n\t\t\t\tclearSearch: langx.proxy(this.clearSearch, this)\n\t\t\t};\n\t\t},\n\n\t\tinit : function (options) {\n\n\t\t\tthis.tree = [];\n\t\t\tthis.nodes = [];\n\n\t\t\tif (options.data) {\n\t\t\t\tif (typeof options.data === 'string') {\n\t\t\t\t\toptions.data = langx.parseJSON(options.data);\n\t\t\t\t}\n\t\t\t\tthis.tree = langx.extend(true, [], options.data);\n\t\t\t\tdelete options.data;\n\t\t\t}\n\t\t\tthis.options = langx.extend({}, _default.settings, options);\n\n\t\t\tthis.destroy();\n\t\t\tthis.subscribeEvents();\n\t\t\tthis.setInitialStates({ nodes: this.tree }, 0);\n\t\t\tthis.render();\n\t\t},\n\n\t\tremove : function () {\n\t\t\tthis.destroy();\n\t\t\tdatax.removeData(this, pluginName);\n\t\t\t$('#' + this.styleId).remove();\n\t\t},\n\n\t\tdestroy : function () {\n\n\t\t\tif (!this.initialized) return;\n\n\t\t\tthis.$wrapper.remove();\n\t\t\tthis.$wrapper = null;\n\n\t\t\t// Switch off events\n\t\t\tthis.unsubscribeEvents();\n\n\t\t\t// Reset this.initialized flag\n\t\t\tthis.initialized = false;\n\t\t},\n\n\t\tunsubscribeEvents : function () {\n\n\t\t\tthis.$element.off('click');\n\t\t\tthis.$element.off('nodeChecked');\n\t\t\tthis.$element.off('nodeCollapsed');\n\t\t\tthis.$element.off('nodeDisabled');\n\t\t\tthis.$element.off('nodeEnabled');\n\t\t\tthis.$element.off('nodeExpanded');\n\t\t\tthis.$element.off('nodeSelected');\n\t\t\tthis.$element.off('nodeUnchecked');\n\t\t\tthis.$element.off('nodeUnselected');\n\t\t\tthis.$element.off('searchComplete');\n\t\t\tthis.$element.off('searchCleared');\n\t\t},\n\n\t\tsubscribeEvents : function () {\n\n\t\t\tthis.unsubscribeEvents();\n\n\t\t\tthis.$element.on('click', langx.proxy(this.clickHandler, this));\n\n\t\t\tif (typeof (this.options.onNodeChecked) === 'function') {\n\t\t\t\tthis.$element.on('nodeChecked', this.options.onNodeChecked);\n\t\t\t}\n\n\t\t\tif (typeof (this.options.onNodeCollapsed) === 'function') {\n\t\t\t\tthis.$element.on('nodeCollapsed', this.options.onNodeCollapsed);\n\t\t\t}\n\n\t\t\tif (typeof (this.options.onNodeDisabled) === 'function') {\n\t\t\t\tthis.$element.on('nodeDisabled', this.options.onNodeDisabled);\n\t\t\t}\n\n\t\t\tif (typeof (this.options.onNodeEnabled) === 'function') {\n\t\t\t\tthis.$element.on('nodeEnabled', this.options.onNodeEnabled);\n\t\t\t}\n\n\t\t\tif (typeof (this.options.onNodeExpanded) === 'function') {\n\t\t\t\tthis.$element.on('nodeExpanded', this.options.onNodeExpanded);\n\t\t\t}\n\n\t\t\tif (typeof (this.options.onNodeSelected) === 'function') {\n\t\t\t\tthis.$element.on('nodeSelected', this.options.onNodeSelected);\n\t\t\t}\n\n\t\t\tif (typeof (this.options.onNodeUnchecked) === 'function') {\n\t\t\t\tthis.$element.on('nodeUnchecked', this.options.onNodeUnchecked);\n\t\t\t}\n\n\t\t\tif (typeof (this.options.onNodeUnselected) === 'function') {\n\t\t\t\tthis.$element.on('nodeUnselected', this.options.onNodeUnselected);\n\t\t\t}\n\n\t\t\tif (typeof (this.options.onSearchComplete) === 'function') {\n\t\t\t\tthis.$element.on('searchComplete', this.options.onSearchComplete);\n\t\t\t}\n\n\t\t\tif (typeof (this.options.onSearchCleared) === 'function') {\n\t\t\t\tthis.$element.on('searchCleared', this.options.onSearchCleared);\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\t\tRecurse the tree structure and ensure all nodes have\n\t\t\tvalid initial states.  User defined states will be preserved.\n\t\t\tFor performance we also take this opportunity to\n\t\t\tindex nodes in a flattened structure\n\t\t*/\n\t\tsetInitialStates : function (node, level) {\n\n\t\t\tif (!node.nodes) return;\n\t\t\tlevel += 1;\n\n\t\t\tvar parent = node;\n\t\t\tvar _this = this;\n\t\t\tlangx.each(node.nodes, function checkStates(index, node) {\n\n\t\t\t\t// nodeId : unique, incremental identifier\n\t\t\t\tnode.nodeId = _this.nodes.length;\n\n\t\t\t\t// parentId : transversing up the tree\n\t\t\t\tnode.parentId = parent.nodeId;\n\n\t\t\t\t// if not provided set selectable default value\n\t\t\t\tif (!node.hasOwnProperty('selectable')) {\n\t\t\t\t\tnode.selectable = true;\n\t\t\t\t}\n\n\t\t\t\t// where provided we should preserve states\n\t\t\t\tnode.state = node.state || {};\n\n\t\t\t\t// set checked state; unless set always false\n\t\t\t\tif (!node.state.hasOwnProperty('checked')) {\n\t\t\t\t\tnode.state.checked = false;\n\t\t\t\t}\n\n\t\t\t\t// set enabled state; unless set always false\n\t\t\t\tif (!node.state.hasOwnProperty('disabled')) {\n\t\t\t\t\tnode.state.disabled = false;\n\t\t\t\t}\n\n\t\t\t\t// set expanded state; if not provided based on levels\n\t\t\t\tif (!node.state.hasOwnProperty('expanded')) {\n\t\t\t\t\tif (!node.state.disabled &&\n\t\t\t\t\t\t\t(level < _this.options.levels) &&\n\t\t\t\t\t\t\t(node.nodes && node.nodes.length > 0)) {\n\t\t\t\t\t\tnode.state.expanded = true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnode.state.expanded = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// set selected state; unless set always false\n\t\t\t\tif (!node.state.hasOwnProperty('selected')) {\n\t\t\t\t\tnode.state.selected = false;\n\t\t\t\t}\n\n\t\t\t\t// index nodes in a flattened structure for use later\n\t\t\t\t_this.nodes.push(node);\n\n\t\t\t\t// recurse child nodes and transverse the tree\n\t\t\t\tif (node.nodes) {\n\t\t\t\t\t_this.setInitialStates(node, level);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tclickHandler : function (event) {\n\n\t\t\tif (!this.options.enableLinks) event.preventDefault();\n\n\t\t\tvar target = $(event.target);\n\t\t\tvar node = this.findNode(target);\n\t\t\tif (!node || node.state.disabled) return;\n\t\t\t\n\t\t\tvar classList = target.attr('class') ? target.attr('class').split(' ') : [];\n\t\t\tif ((classList.indexOf('expand-icon') !== -1)) {\n\n\t\t\t\tthis.toggleExpandedState(node, _default.options);\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t\telse if ((classList.indexOf('check-icon') !== -1)) {\n\t\t\t\t\n\t\t\t\tthis.toggleCheckedState(node, _default.options);\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\tif (node.selectable) {\n\t\t\t\t\tthis.toggleSelectedState(node, _default.options);\n\t\t\t\t} else {\n\t\t\t\t\tthis.toggleExpandedState(node, _default.options);\n\t\t\t\t}\n\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t},\n\n\t\t// Looks up the DOM for the closest parent list item to retrieve the\n\t\t// data attribute nodeid, which is used to lookup the node in the flattened structure.\n\t\tfindNode : function (target) {\n\n\t\t\tvar nodeId = target.closest('li.list-group-item').attr('data-nodeid');\n\t\t\tvar node = this.nodes[nodeId];\n\n\t\t\tif (!node) {\n\t\t\t\tconsole.log('Error: node does not exist');\n\t\t\t}\n\t\t\treturn node;\n\t\t},\n\n\t\ttoggleExpandedState : function (node, options) {\n\t\t\tif (!node) return;\n\t\t\tthis.setExpandedState(node, !node.state.expanded, options);\n\t\t},\n\n\t\tsetExpandedState : function (node, state, options) {\n\n\t\t\tif (state === node.state.expanded) return;\n\n\t\t\tif (state && node.nodes) {\n\n\t\t\t\t// Expand a node\n\t\t\t\tnode.state.expanded = true;\n\t\t\t\tif (!options.silent) {\n\t\t\t\t\tthis.$element.trigger('nodeExpanded', langx.extend(true, {}, node));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!state) {\n\n\t\t\t\t// Collapse a node\n\t\t\t\tnode.state.expanded = false;\n\t\t\t\tif (!options.silent) {\n\t\t\t\t\tthis.$element.trigger('nodeCollapsed', langx.extend(true, {}, node));\n\t\t\t\t}\n\n\t\t\t\t// Collapse child nodes\n\t\t\t\tif (node.nodes && !options.ignoreChildren) {\n\t\t\t\t\tlangx.each(node.nodes, langx.proxy(function (index, node) {\n\t\t\t\t\t\tthis.setExpandedState(node, false, options);\n\t\t\t\t\t}, this));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\ttoggleSelectedState : function (node, options) {\n\t\t\tif (!node) return;\n\t\t\tthis.setSelectedState(node, !node.state.selected, options);\n\t\t},\n\n\t\tsetSelectedState : function (node, state, options) {\n\n\t\t\tif (state === node.state.selected) return;\n\n\t\t\tif (state) {\n\n\t\t\t\t// If multiSelect false, unselect previously selected\n\t\t\t\tif (!this.options.multiSelect) {\n\t\t\t\t\tlangx.each(this.findNodes('true', 'g', 'state.selected'), langx.proxy(function (index, node) {\n\t\t\t\t\t\tthis.setSelectedState(node, false, options);\n\t\t\t\t\t}, this));\n\t\t\t\t}\n\n\t\t\t\t// Continue selecting node\n\t\t\t\tnode.state.selected = true;\n\t\t\t\tif (!options.silent) {\n\t\t\t\t\tthis.$element.trigger('nodeSelected', langx.extend(true, {}, node));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t// Unselect node\n\t\t\t\tnode.state.selected = false;\n\t\t\t\tif (!options.silent) {\n\t\t\t\t\tthis.$element.trigger('nodeUnselected', langx.extend(true, {}, node));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\ttoggleCheckedState : function (node, options) {\n\t\t\tif (!node) return;\n\t\t\tthis.setCheckedState(node, !node.state.checked, options);\n\t\t},\n\n\t\tsetCheckedState : function (node, state, options) {\n\n\t\t\tif (state === node.state.checked) return;\n\n\t\t\tif (state) {\n\n\t\t\t\t// Check node\n\t\t\t\tnode.state.checked = true;\n\n\t\t\t\tif (!options.silent) {\n\t\t\t\t\tthis.$element.trigger('nodeChecked', langx.extend(true, {}, node));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t// Uncheck node\n\t\t\t\tnode.state.checked = false;\n\t\t\t\tif (!options.silent) {\n\t\t\t\t\tthis.$element.trigger('nodeUnchecked', langx.extend(true, {}, node));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsetDisabledState : function (node, state, options) {\n\n\t\t\tif (state === node.state.disabled) return;\n\n\t\t\tif (state) {\n\n\t\t\t\t// Disable node\n\t\t\t\tnode.state.disabled = true;\n\n\t\t\t\t// Disable all other states\n\t\t\t\tthis.setExpandedState(node, false, options);\n\t\t\t\tthis.setSelectedState(node, false, options);\n\t\t\t\tthis.setCheckedState(node, false, options);\n\n\t\t\t\tif (!options.silent) {\n\t\t\t\t\tthis.$element.trigger('nodeDisabled', langx.extend(true, {}, node));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\t// Enabled node\n\t\t\t\tnode.state.disabled = false;\n\t\t\t\tif (!options.silent) {\n\t\t\t\t\tthis.$element.trigger('nodeEnabled', langx.extend(true, {}, node));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\trender : function () {\n\n\t\t\tif (!this.initialized) {\n\n\t\t\t\t// Setup first time only components\n\t\t\t\tthis.$element.addClass(pluginName);\n\t\t\t\tthis.$wrapper = $(this.template.list);\n\n\t\t\t\tthis.injectStyle();\n\n\t\t\t\tthis.initialized = true;\n\t\t\t}\n\n\t\t\tthis.$element.empty().append(this.$wrapper.empty());\n\n\t\t\t// Build tree\n\t\t\tthis.buildTree(this.tree, 0);\n\t\t},\n\n\t\t// Starting from the root node, and recursing down the\n\t\t// structure we build the tree one node at a time\n\t\tbuildTree : function (nodes, level) {\n\n\t\t\tif (!nodes) return;\n\t\t\tlevel += 1;\n\n\t\t\tvar _this = this;\n\t\t\tlangx.each(nodes, function addNodes(id, node) {\n\n\t\t\t\tvar treeItem = $(_this.template.item)\n\t\t\t\t\t.addClass('node-' + _this.elementId)\n\t\t\t\t\t.addClass(node.state.checked ? 'node-checked' : '')\n\t\t\t\t\t.addClass(node.state.disabled ? 'node-disabled': '')\n\t\t\t\t\t.addClass(node.state.selected ? 'node-selected' : '')\n\t\t\t\t\t.addClass(node.searchResult ? 'search-result' : '') \n\t\t\t\t\t.attr('data-nodeid', node.nodeId)\n\t\t\t\t\t.attr('style', _this.buildStyleOverride(node));\n\n\t\t\t\t// Add indent/spacer to mimic tree structure\n\t\t\t\tfor (var i = 0; i < (level - 1); i++) {\n\t\t\t\t\ttreeItem.append(_this.template.indent);\n\t\t\t\t}\n\n\t\t\t\t// Add expand, collapse or empty spacer icons\n\t\t\t\tvar classList = [];\n\t\t\t\tif (node.nodes) {\n\t\t\t\t\tclassList.push('expand-icon');\n\t\t\t\t\tif (node.state.expanded) {\n\t\t\t\t\t\tclassList.push(_this.options.collapseIcon);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tclassList.push(_this.options.expandIcon);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tclassList.push(_this.options.emptyIcon);\n\t\t\t\t}\n\n\t\t\t\ttreeItem\n\t\t\t\t\t.append($(_this.template.icon)\n\t\t\t\t\t\t.addClass(classList.join(' '))\n\t\t\t\t\t);\n\n\n\t\t\t\t// Add node icon\n\t\t\t\tif (_this.options.showIcon) {\n\t\t\t\t\t\n\t\t\t\t\tvar classList = ['node-icon'];\n\n\t\t\t\t\tclassList.push(node.icon || _this.options.nodeIcon);\n\t\t\t\t\tif (node.state.selected) {\n\t\t\t\t\t\tclassList.pop();\n\t\t\t\t\t\tclassList.push(node.selectedIcon || _this.options.selectedIcon || \n\t\t\t\t\t\t\t\t\t\tnode.icon || _this.options.nodeIcon);\n\t\t\t\t\t}\n\n\t\t\t\t\ttreeItem\n\t\t\t\t\t\t.append($(_this.template.icon)\n\t\t\t\t\t\t\t.addClass(classList.join(' '))\n\t\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Add check / unchecked icon\n\t\t\t\tif (_this.options.showCheckbox) {\n\n\t\t\t\t\tvar classList = ['check-icon'];\n\t\t\t\t\tif (node.state.checked) {\n\t\t\t\t\t\tclassList.push(_this.options.checkedIcon); \n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tclassList.push(_this.options.uncheckedIcon);\n\t\t\t\t\t}\n\n\t\t\t\t\ttreeItem\n\t\t\t\t\t\t.append($(_this.template.icon)\n\t\t\t\t\t\t\t.addClass(classList.join(' '))\n\t\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Add text\n\t\t\t\tif (_this.options.enableLinks) {\n\t\t\t\t\t// Add hyperlink\n\t\t\t\t\ttreeItem\n\t\t\t\t\t\t.append($(_this.template.link)\n\t\t\t\t\t\t\t.attr('href', node.href)\n\t\t\t\t\t\t\t.append(node.text)\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// otherwise just text\n\t\t\t\t\ttreeItem\n\t\t\t\t\t\t.append(node.text);\n\t\t\t\t}\n\n\t\t\t\t// Add tags as badges\n\t\t\t\tif (_this.options.showTags && node.tags) {\n\t\t\t\t\tlangx.each(node.tags, function addTag(id, tag) {\n\t\t\t\t\t\ttreeItem\n\t\t\t\t\t\t\t.append($(_this.template.badge)\n\t\t\t\t\t\t\t\t.append(tag)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Add item to the tree\n\t\t\t\t_this.$wrapper.append(treeItem);\n\n\t\t\t\t// Recursively add child ndoes\n\t\t\t\tif (node.nodes && node.state.expanded && !node.state.disabled) {\n\t\t\t\t\treturn _this.buildTree(node.nodes, level);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t// Define any node level style override for\n\t\t// 1. selectedNode\n\t\t// 2. node|data assigned color overrides\n\t\tbuildStyleOverride : function (node) {\n\n\t\t\tif (node.state.disabled) return '';\n\n\t\t\tvar color = node.color;\n\t\t\tvar backColor = node.backColor;\n\n\t\t\tif (this.options.highlightSelected && node.state.selected) {\n\t\t\t\tif (this.options.selectedColor) {\n\t\t\t\t\tcolor = this.options.selectedColor;\n\t\t\t\t}\n\t\t\t\tif (this.options.selectedBackColor) {\n\t\t\t\t\tbackColor = this.options.selectedBackColor;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.options.highlightSearchResults && node.searchResult && !node.state.disabled) {\n\t\t\t\tif (this.options.searchResultColor) {\n\t\t\t\t\tcolor = this.options.searchResultColor;\n\t\t\t\t}\n\t\t\t\tif (this.options.searchResultBackColor) {\n\t\t\t\t\tbackColor = this.options.searchResultBackColor;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn 'color:' + color +\n\t\t\t\t';background-color:' + backColor + ';';\n\t\t},\n\n\t\t// Add inline style into head\n\t\tinjectStyle : function () {\n\n\t\t\tif (this.options.injectStyle && !document.getElementById(this.styleId)) {\n\t\t\t\t$('<style type=\"text/css\" id=\"' + this.styleId + '\"> ' + this.buildStyle() + ' </style>').appendTo('head');\n\t\t\t}\n\t\t},\n\n\t\t// Construct trees style based on user options\n\t\tbuildStyle : function () {\n\n\t\t\tvar style = '.node-' + this.elementId + '{';\n\n\t\t\tif (this.options.color) {\n\t\t\t\tstyle += 'color:' + this.options.color + ';';\n\t\t\t}\n\n\t\t\tif (this.options.backColor) {\n\t\t\t\tstyle += 'background-color:' + this.options.backColor + ';';\n\t\t\t}\n\n\t\t\tif (!this.options.showBorder) {\n\t\t\t\tstyle += 'border:none;';\n\t\t\t}\n\t\t\telse if (this.options.borderColor) {\n\t\t\t\tstyle += 'border:1px solid ' + this.options.borderColor + ';';\n\t\t\t}\n\t\t\tstyle += '}';\n\n\t\t\tif (this.options.onhoverColor) {\n\t\t\t\tstyle += '.node-' + this.elementId + ':not(.node-disabled):hover{' +\n\t\t\t\t\t'background-color:' + this.options.onhoverColor + ';' +\n\t\t\t\t'}';\n\t\t\t}\n\n\t\t\treturn this.css + style;\n\t\t},\n\n\t\t/**\n\t\t\tReturns a single node object that matches the given node id.\n\t\t\t@param {Number} nodeId - A node's unique identifier\n\t\t\t@return {Object} node - Matching node\n\t\t*/\n\t\tgetNode : function (nodeId) {\n\t\t\treturn this.nodes[nodeId];\n\t\t},\n\n\t\t/**\n\t\t\tReturns the parent node of a given node, if valid otherwise returns undefined.\n\t\t\t@param {Object|Number} identifier - A valid node or node id\n\t\t\t@returns {Object} node - The parent node\n\t\t*/\n\t\tgetParent : function (identifier) {\n\t\t\tvar node = this.identifyNode(identifier);\n\t\t\treturn this.nodes[node.parentId];\n\t\t},\n\n\t\t/**\n\t\t\tReturns an array of sibling nodes for a given node, if valid otherwise returns undefined.\n\t\t\t@param {Object|Number} identifier - A valid node or node id\n\t\t\t@returns {Array} nodes - Sibling nodes\n\t\t*/\n\t\tgetSiblings : function (identifier) {\n\t\t\tvar node = this.identifyNode(identifier);\n\t\t\tvar parent = this.getParent(node);\n\t\t\tvar nodes = parent ? parent.nodes : this.tree;\n\t\t\treturn nodes.filter(function (obj) {\n\t\t\t\t\treturn obj.nodeId !== node.nodeId;\n\t\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t\tReturns an array of selected nodes.\n\t\t\t@returns {Array} nodes - Selected nodes\n\t\t*/\n\t\tgetSelected : function () {\n\t\t\treturn this.findNodes('true', 'g', 'state.selected');\n\t\t},\n\n\t\t/**\n\t\t\tReturns an array of unselected nodes.\n\t\t\t@returns {Array} nodes - Unselected nodes\n\t\t*/\n\t\tgetUnselected : function () {\n\t\t\treturn this.findNodes('false', 'g', 'state.selected');\n\t\t},\n\n\t\t/**\n\t\t\tReturns an array of expanded nodes.\n\t\t\t@returns {Array} nodes - Expanded nodes\n\t\t*/\n\t\tgetExpanded : function () {\n\t\t\treturn this.findNodes('true', 'g', 'state.expanded');\n\t\t},\n\n\t\t/**\n\t\t\tReturns an array of collapsed nodes.\n\t\t\t@returns {Array} nodes - Collapsed nodes\n\t\t*/\n\t\tgetCollapsed : function () {\n\t\t\treturn this.findNodes('false', 'g', 'state.expanded');\n\t\t},\n\n\t\t/**\n\t\t\tReturns an array of checked nodes.\n\t\t\t@returns {Array} nodes - Checked nodes\n\t\t*/\n\t\tgetChecked : function () {\n\t\t\treturn this.findNodes('true', 'g', 'state.checked');\n\t\t},\n\n\t\t/**\n\t\t\tReturns an array of unchecked nodes.\n\t\t\t@returns {Array} nodes - Unchecked nodes\n\t\t*/\n\t\tgetUnchecked : function () {\n\t\t\treturn this.findNodes('false', 'g', 'state.checked');\n\t\t},\n\n\t\t/**\n\t\t\tReturns an array of disabled nodes.\n\t\t\t@returns {Array} nodes - Disabled nodes\n\t\t*/\n\t\tgetDisabled : function () {\n\t\t\treturn this.findNodes('true', 'g', 'state.disabled');\n\t\t},\n\n\t\t/**\n\t\t\tReturns an array of enabled nodes.\n\t\t\t@returns {Array} nodes - Enabled nodes\n\t\t*/\n\t\tgetEnabled : function () {\n\t\t\treturn this.findNodes('false', 'g', 'state.disabled');\n\t\t},\n\n\n\t\t/**\n\t\t\tSet a node state to selected\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tselectNode : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setSelectedState(node, true, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tSet a node state to unselected\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tunselectNode : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setSelectedState(node, false, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tToggles a node selected state; selecting if unselected, unselecting if selected.\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\ttoggleNodeSelected : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.toggleSelectedState(node, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\n\t\t/**\n\t\t\tCollapse all tree nodes\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tcollapseAll : function (options) {\n\t\t\tvar identifiers = this.findNodes('true', 'g', 'state.expanded');\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setExpandedState(node, false, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tCollapse a given tree node\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tcollapseNode : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setExpandedState(node, false, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tExpand all tree nodes\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\texpandAll : function (options) {\n\t\t\toptions = langx.extend({}, _default.options, options);\n\n\t\t\tif (options && options.levels) {\n\t\t\t\tthis.expandLevels(this.tree, options.levels, options);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar identifiers = this.findNodes('false', 'g', 'state.expanded');\n\t\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\t\tthis.setExpandedState(node, true, options);\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tExpand a given tree node\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\texpandNode : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setExpandedState(node, true, options);\n\t\t\t\tif (node.nodes && (options && options.levels)) {\n\t\t\t\t\tthis.expandLevels(node.nodes, options.levels-1, options);\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\texpandLevels : function (nodes, level, options) {\n\t\t\toptions = langx.extend({}, _default.options, options);\n\n\t\t\tlangx.each(nodes, langx.proxy(function (index, node) {\n\t\t\t\tthis.setExpandedState(node, (level > 0) ? true : false, options);\n\t\t\t\tif (node.nodes) {\n\t\t\t\t\tthis.expandLevels(node.nodes, level-1, options);\n\t\t\t\t}\n\t\t\t}, this));\n\t\t},\n\n\t\t/**\n\t\t\tReveals a given tree node, expanding the tree from node to root.\n\t\t\t@param {Object|Number|Array} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\trevealNode : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tvar parentNode = this.getParent(node);\n\t\t\t\twhile (parentNode) {\n\t\t\t\t\tthis.setExpandedState(parentNode, true, options);\n\t\t\t\t\tparentNode = this.getParent(parentNode);\n\t\t\t\t}\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tToggles a nodes expanded state; collapsing if expanded, expanding if collapsed.\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\ttoggleNodeExpanded : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.toggleExpandedState(node, options);\n\t\t\t}, this));\n\t\t\t\n\t\t\tthis.render();\n\t\t},\n\n\n\t\t/**\n\t\t\tCheck all tree nodes\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tcheckAll : function (options) {\n\t\t\tvar identifiers = this.findNodes('false', 'g', 'state.checked');\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setCheckedState(node, true, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tCheck a given tree node\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tcheckNode : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setCheckedState(node, true, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tUncheck all tree nodes\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tuncheckAll : function (options) {\n\t\t\tvar identifiers = this.findNodes('true', 'g', 'state.checked');\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setCheckedState(node, false, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tUncheck a given tree node\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tuncheckNode : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setCheckedState(node, false, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tToggles a nodes checked state; checking if unchecked, unchecking if checked.\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\ttoggleNodeChecked : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.toggleCheckedState(node, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\n\t\t/**\n\t\t\tDisable all tree nodes\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tdisableAll : function (options) {\n\t\t\tvar identifiers = this.findNodes('false', 'g', 'state.disabled');\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setDisabledState(node, true, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tDisable a given tree node\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tdisableNode : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setDisabledState(node, true, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tEnable all tree nodes\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tenableAll : function (options) {\n\t\t\tvar identifiers = this.findNodes('true', 'g', 'state.disabled');\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setDisabledState(node, false, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tEnable a given tree node\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\tenableNode : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setDisabledState(node, false, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\t\t/**\n\t\t\tToggles a nodes disabled state; disabling is enabled, enabling if disabled.\n\t\t\t@param {Object|Number} identifiers - A valid node, node id or array of node identifiers\n\t\t\t@param {optional Object} options\n\t\t*/\n\t\ttoggleNodeDisabled : function (identifiers, options) {\n\t\t\tthis.forEachIdentifier(identifiers, options, langx.proxy(function (node, options) {\n\t\t\t\tthis.setDisabledState(node, !node.state.disabled, options);\n\t\t\t}, this));\n\n\t\t\tthis.render();\n\t\t},\n\n\n\t\t/**\n\t\t\tCommon code for processing multiple identifiers\n\t\t*/\n\t\tforEachIdentifier : function (identifiers, options, callback) {\n\n\t\t\toptions = langx.extend({}, _default.options, options);\n\n\t\t\tif (!(identifiers instanceof Array)) {\n\t\t\t\tidentifiers = [identifiers];\n\t\t\t}\n\n\t\t\tlangx.each(identifiers, langx.proxy(function (index, identifier) {\n\t\t\t\tcallback(this.identifyNode(identifier), options);\n\t\t\t}, this));\t\n\t\t},\n\n\t\t/*\n\t\t\tIdentifies a node from either a node id or object\n\t\t*/\n\t\tidentifyNode : function (identifier) {\n\t\t\treturn ((typeof identifier) === 'number') ?\n\t\t\t\t\t\t\tthis.nodes[identifier] :\n\t\t\t\t\t\t\tidentifier;\n\t\t},\n\n\t\t/**\n\t\t\tSearches the tree for nodes (text) that match given criteria\n\t\t\t@param {String} pattern - A given string to match against\n\t\t\t@param {optional Object} options - Search criteria options\n\t\t\t@return {Array} nodes - Matching nodes\n\t\t*/\n\t\tsearch : function (pattern, options) {\n\t\t\toptions = langx.extend({}, _default.searchOptions, options);\n\n\t\t\tthis.clearSearch({ render: false });\n\n\t\t\tvar results = [];\n\t\t\tif (pattern && pattern.length > 0) {\n\n\t\t\t\tif (options.exactMatch) {\n\t\t\t\t\tpattern = '^' + pattern + '$';\n\t\t\t\t}\n\n\t\t\t\tvar modifier = 'g';\n\t\t\t\tif (options.ignoreCase) {\n\t\t\t\t\tmodifier += 'i';\n\t\t\t\t}\n\n\t\t\t\tresults = this.findNodes(pattern, modifier);\n\n\t\t\t\t// Add searchResult property to all matching nodes\n\t\t\t\t// This will be used to apply custom styles\n\t\t\t\t// and when identifying result to be cleared\n\t\t\t\tlangx.each(results, function (index, node) {\n\t\t\t\t\tnode.searchResult = true;\n\t\t\t\t})\n\t\t\t}\n\n\t\t\t// If revealResults, then render is triggered from revealNode\n\t\t\t// otherwise we just call render.\n\t\t\tif (options.revealResults) {\n\t\t\t\tthis.revealNode(results);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.render();\n\t\t\t}\n\n\t\t\tthis.$element.trigger('searchComplete', langx.extend(true, {}, results));\n\n\t\t\treturn results;\n\t\t},\n\n\t\t/**\n\t\t\tClears previous search results\n\t\t*/\n\t\tclearSearch : function (options) {\n\n\t\t\toptions = langx.extend({}, { render: true }, options);\n\n\t\t\tvar results = langx.each(this.findNodes('true', 'g', 'searchResult'), function (index, node) {\n\t\t\t\tnode.searchResult = false;\n\t\t\t});\n\n\t\t\tif (options.render) {\n\t\t\t\tthis.render();\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.$element.trigger('searchCleared', langx.extend(true, {}, results));\n\t\t},\n\n\t\t/**\n\t\t\tFind nodes that match a given criteria\n\t\t\t@param {String} pattern - A given string to match against\n\t\t\t@param {optional String} modifier - Valid RegEx modifiers\n\t\t\t@param {optional String} attribute - Attribute to compare pattern against\n\t\t\t@return {Array} nodes - Nodes that match your criteria\n\t\t*/\n\t\tfindNodes : function (pattern, modifier, attribute) {\n\n\t\t\tmodifier = modifier || 'g';\n\t\t\tattribute = attribute || 'text';\n\n\t\t\tvar _this = this;\n\t\t\treturn langx.grep(this.nodes, function (node) {\n\t\t\t\tvar val = _this.getNodeValue(node, attribute);\n\t\t\t\tif (typeof val === 'string') {\n\t\t\t\t\treturn val.match(new RegExp(pattern, modifier));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t\tRecursive find for retrieving nested attributes values\n\t\t\tAll values are return as strings, unless invalid\n\t\t\t@param {Object} obj - Typically a node, could be any object\n\t\t\t@param {String} attr - Identifies an object property using dot notation\n\t\t\t@return {String} value - Matching attributes string representation\n\t\t*/\n\t\tgetNodeValue : function (obj, attr) {\n\t\t\tvar index = attr.indexOf('.');\n\t\t\tif (index > 0) {\n\t\t\t\tvar _obj = obj[attr.substring(0, index)];\n\t\t\t\tvar _attr = attr.substring(index + 1, attr.length);\n\t\t\t\treturn this.getNodeValue(_obj, _attr);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (obj.hasOwnProperty(attr)) {\n\t\t\t\t\treturn obj[attr].toString();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tvar logError = function (message) {\n\t\tif (window.console) {\n\t\t\twindow.console.error(message);\n\t\t}\n\t};\n\n\n    plugins.register(TreeView,\"treeview\");\n\n\treturn skylark.attach(\"intg.bs3.TreeView\",TreeView);\n});\ndefine('skylark-bootstrap-treeview/main',[\r\n\t\"./TreeView\"\r\n],function(TreeView){\r\n\treturn TreeView;\r\n});\ndefine('skylark-bootstrap-treeview', ['skylark-bootstrap-treeview/main'], function (main) { return main; });\n\n"]}